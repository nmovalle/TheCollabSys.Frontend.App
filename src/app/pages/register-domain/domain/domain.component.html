<div class="surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden">
    <div class="flex flex-column align-items-center justify-content-center">
        <div style="border-radius:56px; padding:0.3rem; background: linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%);">
            <div class="w-full surface-card py-8 px-5 sm:px-8" style="border-radius:53px; max-width: 500px; width: 100%;">
                <div class="text-center mb-5">
                    <div class="text-900 text-3xl font-medium mb-3">Welcome to The Collabsys!</div>
                    @if(thereDomain) {
                        <p class="text-600 font-medium">
                            We have detected that a Company you might belong to already exists. Are you familiar with it?
                        </p>
                    } @else {
                        <p class="text-600 font-medium">
                            Please, fill the data of your company.
                        </p>
                    }
                </div>
                <p-toast></p-toast>

                @if(showContent && thereDomain) {
                    <div>
                        <div class="formgrid grid">
                            <div class="field col-12 text-center">
                                <h4 for="fullName" class="text-center font-bold">Company</h4>
                                <h4>{{ company }}</h4>
                            </div>
                            <div class="field col-12 text-center">
                                <h4 for="domain" class="text-center font-bold">Domain</h4>
                                <h4>{{ domain }}</h4>
                            </div>
                        </div>
                        @if(!userCompanyId) {
                            <div class="mt-4 text-center mb-5">
                                <button 
                                    pButton 
                                    pRipple 
                                    label="Confirm" 
                                    class="block w-full p-3 text-xl p-button-success"
                                    (click)="confirmDomain();"
                                ></button>
                            </div>
                        }
                    </div>
                } @else if(showContent && !thereDomain) {
                    <div>
                        <form [formGroup]="dataForm" (ngSubmit)="onSubmit($event)">
                            <div class="formgrid grid">
                                <div class="field col-12">
                                    <label for="fullName" class="w-full text-left font-bold mb-2">Full Name</label>
                                    <input 
                                        type="text" 
                                        id="fullName" 
                                        formControlName="fullName" 
                                        style="width: 24px;" 
                                        class="w-full"
                                        name="fullName"
                                        pInputText />
                                    <small id="fullName-help" class="p-error" *ngIf="(fullName.invalid && (fullName.dirty || fullName.touched)) || !fullName.value">
                                        Full name field is required *
                                    </small>
                                </div>
    
                                <div class="field col-12">
                                    <label for="address" class="w-full text-left font-bold mb-2">Address</label>
                                    <input 
                                        type="text" 
                                        id="address" 
                                        formControlName="address" 
                                        style="width: 24px;" 
                                        class="w-full"
                                        name="address"
                                        pInputText />
                                    <small id="address-help" class="p-error" *ngIf="(address.invalid && (address.dirty || address.touched)) || !address.value">
                                        Address field is required *
                                    </small>
                                </div>
                            </div>
                
                            <div class="formgrid grid">
                                <div class="field col-12">
                                    <label for="zipCode" class="w-full text-left font-bold mb-2">Zip Code</label>
                                    <input 
                                        type="text" 
                                        id="zipCode" 
                                        formControlName="zipCode" 
                                        style="width: 24px;" 
                                        class="w-full"
                                        name="zipCode"
                                        pInputText />
                                    <small id="zipCode-help" class="p-error" *ngIf="(zipCode.invalid && (zipCode.dirty || zipCode.touched)) || !zipCode.value">
                                        Zip Code field is required *
                                    </small>
                                </div>
    
                                <div class="field col-12">
                                    <label for="phone" class="w-full text-left font-bold mb-2">Phone</label>
                                    <input 
                                        type="text" 
                                        id="phone" 
                                        formControlName="phone" 
                                        style="width: 24px;" 
                                        class="w-full"
                                        name="phone"
                                        pInputText />
                                    <small id="phone-help" class="p-error" *ngIf="(phone.invalid && (phone.dirty || phone.touched)) || !phone.value">
                                        <ng-container *ngIf="phone.errors.required">
                                            Phone field is required *
                                        </ng-container>
                                        <ng-container *ngIf="phone.errors.pattern && !phone.errors.required">
                                            Invalid phone number format *
                                        </ng-container>
                                    </small>
                                </div>
                            </div>
                                
                            <div class="formgrid grid">
                                <div class="field col-12">
                                    <label for="logo" class="w-full text-left font-bold mb-2">Logo</label>               
                                    <p-fileUpload
                                        #fileUpload
                                        name="logo"
                                        id="file" 
                                        (onSelect)="onUpload($event, fileUpload)"
                                        [multiple]="false" 
                                        accept="image/*" 
                                        [maxFileSize]="1000000"
                                        mode="basic">
                                    </p-fileUpload>
                                    <div class="flex justify-content-left" *ngIf="imageURL != null">
                                        <p-image 
                                            [src]="imageURL" 
                                            alt="Image" 
                                            width="250" 
                                            [preview]="true">
                                        </p-image>
                                    </div>
                                </div>           
                            </div>
                      
                            <div class="mt-4 text-center mb-5">
                                <button type="submit" pButton label="Save" class="block w-full p-3 text-xl p-button-success"></button>
                            </div>
                        </form>
                    </div>
                }

                <div class="text-center mb-5">
                    <span class="text-600 font-medium">Or back to Log In: </span>
                </div>
                <div>
                    <button 
                        pButton 
                        pRipple 
                        label="Log In" 
                        class="block w-full p-3 text-xl"
                        (click)="goTo('/');">
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="loading" class="progress-spinner">
    <p-progressSpinner styleClass="w-4rem h-4rem" strokeWidth="8" fill="var(--surface-ground)" animationDuration=".5s"></p-progressSpinner>
</div>
